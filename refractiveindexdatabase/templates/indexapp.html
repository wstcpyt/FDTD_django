{% extends 'appbase.html' %}
{% block title %}
    INDEXApp
{% endblock %}
{% block head %}
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="/static/js/lib/googlelinechart/googlelinechart.js"></script>
{% endblock %}
{% block contents %}
    <div class="indexapp">
        <md-toolbar id="toolbar" class="md-toolbar-tools" style="display: none;">
            <md-button class="md-icon-button" aria-label="Settings">
                <md-icon md-svg-icon="/static/images/icons/menu.svg"></md-icon>
            </md-button>
            <div class="md-toolbar-tools">
                <span>Refractive Index Database</span>
            </div>
        </md-toolbar>
        <div class="container">
            {% verbatim %}
            <div id="search" ng-controller="SearchCtrl" style="display: none">
                <form ng-submit="$event.preventDefault()">
                    <md-autocomplete
                            md-selected-item="selectedItem"
                            md-search-text-change="searchTextChange(searchText)"
                            md-search-text="searchText"
                            md-selected-item-change="selectedItemChange(item)"
                            md-items="item in querySearch(searchText)"
                            md-item-text="item.display"
                            md-min-length="0"
                            placeholder="Search your element">
                        <md-item-template>
                            <span class="searchspan" md-highlight-text="searchText" md-highlight-flags="^i">{{item.display}}</span>
                        </md-item-template>
                    </md-autocomplete>
                    <br/>
                </form>
                <div id="elementlist" layout layout-align="center center" style="display: none">
                    <md-whiteframe class="md-whiteframe-z1" ng-hide='hideelementlist'>
                        <md-content>
                            <md-list>
                                <md-list-item ng-mousedown="drawIndexChart(item)" class="md-3-line" ng-repeat="item in elementlist">
                                    <div class="md-list-item-text">
                                        <h3 id="elementlisttitle">{{item.title}}</h3>
                                    </div>
                                    <md-divider ng-if="!$last"></md-divider>
                                </md-list-item>
                            </md-list>
                        </md-content>
                    </md-whiteframe>
                </div>
                <div id="linechart" layout layout-align="center center" style="display: none;">
                    <md-whiteframe class="md-whiteframe-z1" layout="column" id="chartframe" >
                        <md-progress-circular ng-show="loadingchart" md-mode="indeterminate"></md-progress-circular>
                        <div id="linechart_material" style="height: inherit"></div>
                    </md-whiteframe>
                </div>
            </div>

        </div>
        {% endverbatim %}
    </div>
{% endblock %}
{% block javascript %}
    <script src="/static/js/src/indexapp.js"></script>
    <script>
        {# FOUC PREVENTION#}
        $( document ).ready(function() {
            $('#elementlist').show();
            $('#linechart').show();
            $('#search').show();
            $('#toolbar').show()
        });
    </script>
{% endblock %}
