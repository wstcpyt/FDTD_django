// Generated by CoffeeScript 1.9.2
(function() {
  var Rectdevice, polymer;

  polymer = {
    is: 'fdtd-model',
    properties: {
      numberoflayer: {
        type: Number,
        notify: true,
        observer: "layernumberChanged"
      }
    },
    attached: function() {},
    layernumberChanged: function() {
      var rectdevice;
      rectdevice = new Rectdevice(this, this.numberoflayer);
      return rectdevice.rendersvg();
    }
  };

  Rectdevice = (function() {
    function Rectdevice(polymerscope, numberoflayer) {
      this.polymerscope = polymerscope;
      this.numberoflayer = numberoflayer;
      this.layernumber = this.numberoflayer;
      this.width = 200;
      this.height = 500.0 / this.layernumber;
    }

    Rectdevice.prototype.rendersvg = function() {
      var color, i, j, rect, ref, self, svg;
      self = this;
      color = d3.scale.category20();
      svg = d3.select(self.polymerscope.$$("#id_device_svg"));
      for (i = j = 0, ref = this.layernumber - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
        svg.append("g").data([
          {
            x: self.width / 2,
            y: self.height / 2
          }
        ]);
      }
      return rect = d3.selectAll(self.polymerscope.$$("#id_device_svg").getElementsByTagName("g")).append("rect").attr("height", self.height).attr("width", self.width).attr("x", function(d) {
        return d.x;
      }).attr("y", function(d, i) {
        return d.y + i * self.height;
      }).style("fill", function(d, i) {
        return color(i);
      }).on("click", function(d, i) {
        self.polymerscope.$$("#id_fdtd_layer_editor").style.display = "inline-block";
        return self.polymerscope.$$("#id_fdtd_layer_editor").layernumber = i;
      });
    };

    return Rectdevice;

  })();

  Polymer(polymer);

}).call(this);

//# sourceMappingURL=fdtd-model.js.map
