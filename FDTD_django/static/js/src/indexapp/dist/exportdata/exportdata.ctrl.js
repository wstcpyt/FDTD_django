// Generated by CoffeeScript 1.9.2
(function() {
  define(['./module'], function(module) {
    module.service("generateCSVfileService", [
      function() {
        var self;
        self = this;
        self.generateCSV = function(dataarray) {
          self.csvContent = "data:text/csv;charset=utf-8,";
          if (dataarray[0].length === 3) {
            self.csvContent += "wl,n,k" + "\n";
          } else if (dataarray[0].length === 2) {
            self.csvContent += "wl,n" + "\n";
          }
          return dataarray.forEach(function(infoArray) {
            var dataString;
            dataString = infoArray.join(",");
            return self.csvContent += dataString + "\n";
          });
        };
        self.downloadCSV = function() {
          var encodedUri;
          encodedUri = encodeURI(self.csvContent);
          window.open(encodedUri);
          return true;
        };
        return 0;
      }
    ]);
    module.service("generateTXTfileService", [
      function() {
        var self;
        self = this;
        self.generateTXT = function(dataarray) {
          self.txtContent = "data:text;charset=utf-8,";
          if (dataarray[0].length === 3) {
            self.txtContent += "wl  n   k" + "\n";
          } else if (dataarray[0].length === 2) {
            self.txtContent += "wl  n" + "\n";
          }
          return dataarray.forEach(function(infoArray) {
            var dataString;
            dataString = infoArray.join("\t");
            return self.txtContent += dataString + "\n";
          });
        };
        self.downloadTXT = function() {
          var encodedUri;
          encodedUri = encodeURI(self.txtContent);
          window.open(encodedUri);
          return true;
        };
        return 0;
      }
    ]);
    module.service("generateJSONfileService", [
      function() {
        var self;
        self = this;
        self.generateJSON = function(jsonobject) {
          var jsonstring;
          jsonstring = JSON.stringify(jsonobject);
          self.JSONContent = "data:text;charset=utf-8,";
          return self.JSONContent += jsonstring;
        };
        self.downloadJSON = function() {
          var encodedUri;
          encodedUri = encodeURI(self.JSONContent);
          window.open(encodedUri);
          return true;
        };
        return 0;
      }
    ]);
    return module.controller('exportdataCtrl', [
      '$scope', 'generateCSVfileService', 'indexdataService', 'generateTXTfileService', 'generateJSONfileService', function($scope, generateCSVfileService, indexdataService, generateTXTfileService, generateJSONfileService) {
        $scope.exportcsv = function() {
          var dataarray;
          dataarray = indexdataService.indexdata.dataArray;
          generateCSVfileService.generateCSV(dataarray);
          return generateCSVfileService.downloadCSV();
        };
        $scope.exporttxt = function() {
          var dataarray;
          dataarray = indexdataService.indexdata.dataArray;
          generateTXTfileService.generateTXT(dataarray);
          return generateTXTfileService.downloadTXT();
        };
        return $scope.exportjson = function() {
          var jsonobject;
          jsonobject = indexdataService.indexdata.data;
          generateJSONfileService.generateJSON(jsonobject);
          return generateJSONfileService.downloadJSON();
        };
      }
    ]);
  });

}).call(this);

//# sourceMappingURL=exportdata.ctrl.js.map
