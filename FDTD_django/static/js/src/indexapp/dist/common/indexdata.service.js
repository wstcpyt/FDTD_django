// Generated by CoffeeScript 1.9.2
(function() {
  define(['./module'], function(module) {
    return module.service("indexdataService", [
      '$http', '$q', '$rootScope', function($http, $q, $rootScope) {
        var self;
        self = this;
        this.seturl = function(url) {
          return this.url = url;
        };
        this.getdata = function() {
          var deferred;
          deferred = $q.defer();
          $http.get(this.url).success(function(data) {
            var dataArray, indexdata;
            dataArray = self.gendataArrayfromRawData(data);
            indexdata = {
              data: data,
              dataArray: dataArray
            };
            return deferred.resolve(indexdata);
          }).error(function() {
            return console.log('cannot retrieve elementlist index data');
          });
          deferred.promise.then(function(indexdata) {
            return self.indexdata = indexdata;
          });
          return deferred.promise;
        };
        this.gendataArrayfromRawData = function(data) {
          var dataArray, i, len, object, ref;
          dataArray = [];
          ref = data["DATA"]["0"]["data"].split('\n');
          for (i = 0, len = ref.length; i < len; i++) {
            object = ref[i];
            if (object.split(' ').length > 1) {
              dataArray.push(object.split(' ').map(Number));
            }
          }
          return dataArray;
        };
        return 0;
      }
    ]);
  });

}).call(this);

//# sourceMappingURL=indexdata.service.js.map
